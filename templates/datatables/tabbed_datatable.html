{% load static %}

<link href="{% static 'css/plugins/dataTables/dataTables.bootstrap.css' %}" rel="stylesheet">
<link href="{% static 'css/plugins/dataTables/plugins/ColReorder/dataTables.colReorder.min.css' %}" rel="stylesheet">
<link href="{% static 'css/plugins/dataTables/plugins/ColVis/dataTables.colVis.css' %}" rel="stylesheet">
<link href="{% static 'css/plugins/dataTables/plugins/TableTools/dataTables.tableTools.css' %}" rel="stylesheet">

<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading" id="panel_header">
                <!-- The title of the datatable -->
                {% block table_title %}DataTable{% endblock %}
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                        <thead>
                            <tr>
                                <!-- This block determines the columns in the datatable -->
                                {% block columns %}
                                    <th></th> <!-- Column name goes here -->
                                {% endblock %}
                            </tr>
                        </thead>
                        <tbody>
                            <!-- This block handles putting data into the datatable -->
                            <!-- Each td tag corresponds to its respective column header as listed in the columns block -->
                            {% block table_data %}
                                <tr class="odd gradeX">
                                    <td></td>
                                </tr>
                            {% endblock %}
                        </tbody>
                    </table>
                </div>

            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
</div>

<!-- Javscript files needed for datatables to function -->


<script src="{% static 'js/plugins/dataTables/jquery.dataTables.js' %}"></script>
<script src="{% static 'js/plugins/dataTables/dataTables.bootstrap.js' %}"></script>
<script src="{% static 'js/plugins/dataTables/plugins/ColReorder/dataTables.colReorder.js' %}"></script>
<script src="{% static 'js/plugins/dataTables/plugins/ColVis/dataTables.colVis.js' %}"></script>
<script src="{% static 'js/plugins/dataTables/plugins/TableTools/dataTables.tableTools.js' %}"></script>
<script> //This script initiates the table and sets up the ColVis, ColReorder, and TableTools plugins. Some styling is also done
    $(document).ready(function() {

        $('#dataTables-example').dataTable({
        	"dom": 'TCR<"clear">lfrtip',
        	"tableTools": {
                "sSwfPath": "{% static 'css/plugins/dataTables/plugins/TableTools/copy_csv_xls_pdf.swf' %}"
            },

        	"fnInitComplete": function() {
        		$('.ColVis').appendTo("#panel_header");
        		$('.DTTT_container').appendTo('#panel_header');
        	},
        	{% block datatables_extra_js %}
        	"aoColumnDefs": [
                 <!--Column indices that should be hidden by default go in the block within the brackets-->
        	     {"bVisible": false, "aTargets": [{% block hide_column_index%}{% endblock %}]}
        	 ]
        	{% endblock %}

        });
    });
</script>
